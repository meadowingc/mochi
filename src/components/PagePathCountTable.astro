---
const { pathToCounts, siteUrl, title, addLinks } = Astro.props;
---

<div class="mt-4">
  <h2 class="text-xl font-bold">{title}</h2>
  {
    Object.keys(pathToCounts).length === 0 ? (
      <p>No data</p>
    ) : (
      <ul class="mt-2">
        <li class="flex items-center justify-between py-2 px-4 border-b border-gray-200 bg-white">
          <span class="font-bold">Path</span>
          <span class="font-bold">Visits</span>
        </li>
        {Object.entries(pathToCounts).map(([path, counts], index) => (
          <li
            class={`flex items-center justify-between py-2 px-4 border-b border-gray-200 ${index % 2 === 0 ? "bg-gray-100" : "bg-white"}`}
          >
            <span>
              {addLinks && (
                <a
                  href={`${siteUrl.url.replace(/\/+$/, "")}/${path.replace(/^\/+/, "")}`}
                  target="_blank"
                  class="text-blue-500 underline"
                  rel="noopener noreferrer"
                >
                  {path}
                </a>
              )}
              {!addLinks && path}
            </span>
            <span>{counts}</span>
          </li>
        ))}
      </ul>
    )
  }
</div>
