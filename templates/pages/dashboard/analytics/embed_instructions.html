{% extends "/layouts/standard.html" %}

{% macro Title %}Embed Instructions{% end %}

{% macro Body %}
  <h1 class="text-2xl font-bold">{{site.URL}}</h1>

  <!-- embed instructions link -->
  <div class="mt-2 mb-8">
    <a href="/dashboard/{{site.ID}}/analytics" class="text-blue-500 underline">
      Back to analytics dashboard
    </a>
  </div>

  <hr class="my-4 border-t border-gray-200" />

  <div class="m-4 mb-8">
    <div class="bg-white shadow-md rounded-lg p-6">
      <h2 class="text-xl font-bold">Embed instructions</h2>
      <div class="mt-2 text-gray-700">
        <p class="mb-2">
          To embed the analytics script on your site, you need to add the below tag to your site's HTML.
          You should add it at the very end of the <code class="bg-gray-200 text-red-600 px-1 rounded">&lt;head&gt;</code>
          tag.
        </p>
        <code class="bg-gray-800 text-white p-4 rounded-lg block overflow-x-auto mb-4 mt-4">
          &lt;script src="{{publicURL}}/reaper/{{escapePath(signedInUser.Username)}}/embed/{{site.ID}}.js"
          async&gt;&lt;/script&gt;
        </code>
        <p class="mb-4">
          This will start tracking visits to your site and sending the data to
          your dashboard.
        </p>
        <h3 class="text-lg font-semibold mb-2">Prevent from tracking your own visits</h3>
        <p class="mb-2">
          The <code class="bg-gray-200 text-red-600 px-1 rounded">mochi_ignore</code> parameter can be used to control whether your own visits are tracked.
          You can add <code class="bg-gray-200 text-red-600 px-1 rounded">?mochi_ignore=true</code> to the URL to stop tracking your visits in the current browser.
          To re-enable tracking, add <code class="bg-gray-200 text-red-600 px-1 rounded">?mochi_ignore=false</code> to the URL.
        </p>
        <p class="mb-4">
          When you disable tracking, a message will alert you that mochi will no longer track your own hits in this browser.
          Similarly, when you re-enable tracking, a message will alert you that mochi has been enabled for this website in this browser.
        </p>
      </div>
    </div>
  </div>

  <div class="m-4 mb-8">
    <div class="bg-white shadow-md rounded-lg p-6">
      <h2 class="text-xl font-bold">Kudos (Likes)</h2>
      <div class="mt-2 text-gray-700">
        <p class="mb-2">
          Add a kudos button to your pages so visitors can show their appreciation. It's a great way to see how many real humans engaged with your content.
        </p>

        <h3 class="text-lg font-semibold mb-2 mt-4">1. Enable kudos in your embed script</h3>
        <p class="mb-2">
          Add <code class="bg-gray-200 text-red-600 px-1 rounded">?kudos</code> to your embed script URL:
        </p>
        <code class="bg-gray-800 text-white p-4 rounded-lg block overflow-x-auto mb-4 mt-4">
          &lt;script src="{{publicURL}}/reaper/{{escapePath(signedInUser.Username)}}/embed/{{site.ID}}.js?kudos" async&gt;&lt;/script&gt;
        </code>

        <h3 class="text-lg font-semibold mb-2 mt-4">2. Add a kudos button to your page</h3>
        <p class="mb-2">
          Place a button with the <code class="bg-gray-200 text-red-600 px-1 rounded">mochi_kudos</code> class wherever you'd like the kudos button to appear:
        </p>
        <code class="bg-gray-800 text-white p-4 rounded-lg block overflow-x-auto mb-4 mt-4">
          &lt;button class="mochi_kudos"&gt;&lt;/button&gt;
        </code>
        <p class="mb-4">
          The button will automatically show the current kudos count (e.g. "üëã 42"). Visitors can click it once per page ‚Äî their choice is stored in the browser.
        </p>

        <h3 class="text-lg font-semibold mb-2 mt-4">Options</h3>
        <ul class="list-disc list-inside mb-4 space-y-2">
          <li>
            <strong>Custom emoji:</strong> Use <code class="bg-gray-200 text-red-600 px-1 rounded">?kudos=‚ù§Ô∏è</code> to change the default üëã emoji.
          </li>
          <li>
            <strong>Custom styling:</strong> Use <code class="bg-gray-200 text-red-600 px-1 rounded">?kudos=custom</code> to get only the count number, so you can style the button yourself.
          </li>
          <li>
            <strong>Multiple buttons:</strong> On index pages with multiple posts, use <code class="bg-gray-200 text-red-600 px-1 rounded">data-path</code> to specify which page each button belongs to:
            <code class="bg-gray-800 text-white p-4 rounded-lg block overflow-x-auto mt-2">
              &lt;button class="mochi_kudos" data-path="/blog/my-post"&gt;&lt;/button&gt;
            </code>
          </li>
          <li>
            <strong>Private kudos:</strong> Add <code class="bg-gray-200 text-red-600 px-1 rounded">data-private="true"</code> to hide the count from visitors. You'll still see it in your dashboard.
          </li>
        </ul>

        <h3 class="text-lg font-semibold mb-2 mt-4">Styling</h3>
        <p class="mb-2">
          When a visitor gives kudos, the button gets the <code class="bg-gray-200 text-red-600 px-1 rounded">did_kudo</code> CSS class and becomes disabled. Use this class to style the active state. For example:
        </p>
        <code class="bg-gray-800 text-white p-4 rounded-lg block overflow-x-auto mb-4 mt-2">
          .mochi_kudos.did_kudo { background-color: #f0fdf4; border-color: #86efac; }
        </code>
      </div>
    </div>
  </div>
{% end %}
