{% extends "/layouts/standard.html" %}

{% macro Title %}Embed Instructions | {{site.URL}}{% end %}

{% macro Body %}

  <!-- Header row -->
  <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2">
    <div>
      <h1 class="text-xl font-bold text-gray-900">{{site.URL}}</h1>
      <a href="/dashboard" class="text-sm text-gray-400 hover:text-gray-600 transition-colors">‚Üê Dashboard</a>
    </div>
  </div>

  <!-- Tabs -->
  <div class="mt-3 border-b border-stone-200">
    <nav class="-mb-px flex space-x-6">
      <a href="/dashboard/{{site.ID}}/analytics" class="border-transparent text-gray-400 hover:text-gray-600 hover:border-gray-300 whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm cursor-pointer transition-colors">
        Analytics
      </a>
      <a href="/dashboard/{{site.ID}}/webmentions" class="border-transparent text-gray-400 hover:text-gray-600 hover:border-gray-300 whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm cursor-pointer transition-colors">
        Webmentions
      </a>
      <a href="/dashboard/{{site.ID}}/settings" class="border-transparent text-gray-400 hover:text-gray-600 hover:border-gray-300 whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm cursor-pointer transition-colors">
        Site Settings
      </a>
    </nav>
  </div>

  <!-- Analytics script -->
  <div class="mt-8">
    <h2 class="text-xs font-semibold uppercase tracking-wider text-gray-400 mb-4">Analytics Script</h2>
    <p class="text-sm text-gray-600 mb-3">
      Add this tag at the end of your <code class="bg-gray-100 text-gray-800 text-xs px-1.5 py-0.5 rounded font-mono">&lt;head&gt;</code> to start tracking visits.
    </p>
    <pre class="bg-gray-900 text-gray-100 text-sm p-4 rounded-lg overflow-x-auto font-mono">&lt;script src="{{publicURL}}/reaper/{{escapePath(signedInUser.Username)}}/embed/{{site.ID}}.js" async&gt;&lt;/script&gt;</pre>
  </div>

  <!-- Ignore your own visits -->
  <div class="mt-8">
    <h2 class="text-xs font-semibold uppercase tracking-wider text-gray-400 mb-4">Ignore Your Own Visits</h2>
    <p class="text-sm text-gray-600 mb-2">
      Append <code class="bg-gray-100 text-gray-800 text-xs px-1.5 py-0.5 rounded font-mono">?mochi_ignore=true</code> to any page URL on your site to stop tracking your visits in that browser.
      Use <code class="bg-gray-100 text-gray-800 text-xs px-1.5 py-0.5 rounded font-mono">?mochi_ignore=false</code> to re-enable tracking.
    </p>
    <p class="text-sm text-gray-400">
      An alert will confirm when tracking has been disabled or re-enabled.
    </p>
  </div>

  <!-- Kudos -->
  <div class="mt-8">
    <h2 class="text-xs font-semibold uppercase tracking-wider text-gray-400 mb-4">Kudos (Likes)</h2>
    <p class="text-sm text-gray-600 mb-4">
      Add a kudos button so visitors can show appreciation. A great way to measure real engagement.
    </p>

    <!-- Step 1 -->
    <div class="mb-5">
      <h3 class="text-sm font-semibold text-gray-700 mb-2">1. Enable kudos in your embed script</h3>
      <p class="text-sm text-gray-600 mb-2">
        Add <code class="bg-gray-100 text-gray-800 text-xs px-1.5 py-0.5 rounded font-mono">?kudos</code> to the script URL:
      </p>
      <pre class="bg-gray-900 text-gray-100 text-sm p-4 rounded-lg overflow-x-auto font-mono">&lt;script src="{{publicURL}}/reaper/{{escapePath(signedInUser.Username)}}/embed/{{site.ID}}.js?kudos" async&gt;&lt;/script&gt;</pre>
    </div>

    <!-- Step 2 -->
    <div class="mb-5">
      <h3 class="text-sm font-semibold text-gray-700 mb-2">2. Add a kudos button to your page</h3>
      <p class="text-sm text-gray-600 mb-2">
        Place a button with the <code class="bg-gray-100 text-gray-800 text-xs px-1.5 py-0.5 rounded font-mono">mochi_kudos</code> class wherever you'd like it to appear:
      </p>
      <pre class="bg-gray-900 text-gray-100 text-sm p-4 rounded-lg overflow-x-auto font-mono">&lt;button class="mochi_kudos"&gt;&lt;/button&gt;</pre>
      <p class="text-sm text-gray-400 mt-2">
        The button automatically shows the current count (e.g. "üëã 42"). Visitors can click once per page ‚Äî stored in the browser.
      </p>
    </div>

    <!-- Options -->
    <div class="mb-5">
      <h3 class="text-sm font-semibold text-gray-700 mb-3">Options</h3>
      <div class="space-y-3 text-sm text-gray-600">
        <div class="flex gap-2">
          <span class="font-medium text-gray-700 shrink-0">Custom emoji</span>
          <span>‚Äî Use <code class="bg-gray-100 text-gray-800 text-xs px-1.5 py-0.5 rounded font-mono">?kudos=‚ù§Ô∏è</code> to change the default üëã emoji.</span>
        </div>
        <div class="flex gap-2">
          <span class="font-medium text-gray-700 shrink-0">Custom styling</span>
          <span>‚Äî Use <code class="bg-gray-100 text-gray-800 text-xs px-1.5 py-0.5 rounded font-mono">?kudos=custom</code> to get only the count number, so you can style it yourself.</span>
        </div>
        <div>
          <div class="flex gap-2">
            <span class="font-medium text-gray-700 shrink-0">Multiple buttons</span>
            <span>‚Äî On index pages, use <code class="bg-gray-100 text-gray-800 text-xs px-1.5 py-0.5 rounded font-mono">data-path</code> to specify which page each button belongs to:</span>
          </div>
          <pre class="bg-gray-900 text-gray-100 text-sm p-4 rounded-lg overflow-x-auto font-mono mt-2">&lt;button class="mochi_kudos" data-path="/blog/my-post"&gt;&lt;/button&gt;</pre>
        </div>
        <div class="flex gap-2">
          <span class="font-medium text-gray-700 shrink-0">Private kudos</span>
          <span>‚Äî Add <code class="bg-gray-100 text-gray-800 text-xs px-1.5 py-0.5 rounded font-mono">data-private="true"</code> to hide the count from visitors. You'll still see it in your dashboard.</span>
        </div>
      </div>
    </div>

    <!-- Styling -->
    <div>
      <h3 class="text-sm font-semibold text-gray-700 mb-2">Styling the active state</h3>
      <p class="text-sm text-gray-600 mb-2">
        After a visitor clicks kudos, the button gets the <code class="bg-gray-100 text-gray-800 text-xs px-1.5 py-0.5 rounded font-mono">did_kudo</code> class and becomes disabled. Style it like:
      </p>
      <pre class="bg-gray-900 text-gray-100 text-sm p-4 rounded-lg overflow-x-auto font-mono">.mochi_kudos.did_kudo { background-color: #f0fdf4; border-color: #86efac; }</pre>
    </div>
  </div>
{% end %}
